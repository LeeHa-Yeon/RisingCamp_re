# 📌  주제

🎮 **농작물을 재배하여 많은 점수를 획득해라**


# 🤔 기획

---

**화면 구성**

- 홈화면
- 게임화면
    - 닉네임을 설정한 후 게임 입장
- 게임 설명 화면 → 페이징기법으로 표시
- 랭킹 리스트 화면 → UserDefaults를 이용하여 유저 정보 저장했다가 정렬하여 띄우기
    - 순위와 이름 점수가 표시가 됩니다.
    - 1~3위까지 색을 달리하여 구분하였습니다.
    - 현재 접속한 유저의 순위를 체크표시로 알려줍니다.

**게임 설명**

- 게임 시간은 단 1분(60초)이 주어집니다.
- 하단의 아이템을 이용하여 텃밭에 농작물을 기르고 수확할 수 있습니다.
    - 아이템의 순서 : 삽 → 씨앗 → 물뿌리개 → 수확
    - 만약 아이템의 순서가 틀리게 되면 메시지창이 띄어지며 다음단계로 넘어가지 않습니다.
    - 해충제는 두더지가 나올때 사용하여 제거할 수 있습니다.
- 수확할 대상은 텃밭 아래에 이미지와 갯수와 함께 표시가 됩니다.
- 현재 수확해야 할 농작물을 모두 재배했다면 다음 수확해야 할 농작물과 갯수가 새로 업데이트 됩니다.
- 점수
    - 수확할 대상의 갯수와 내가 수확한 갯수가 일치하면 **해당갯수*10** 만큼의 점수가 올라갑니다.
    - 만약, 텃밭에 주어진 시간(10초) 이상 방치하게 되면 두더지가 출몰하게 되고 점수가 30점씩 깎이게 됩니다.
    - 만약 점수가 0점 이하가 되면 바로 게임이 종료가 됩니다.
- 시간
    - 정상적으로 게임 시간이 종료가 되면 나의 점수를 알림창으로 알려주며 새 게임 여부를 묻습니다.
- 설정버튼
    
    <aside>
    📌 우선 설정 버튼을 누르게 되면 모든 타이머가 비활성화 됩니다.
    
    </aside>
    
    - 다시시작 : 모두 초기화되고 새게임으로 진행됩니다.
    - 계속하기 : 다시 모든 타이머가 활성화되고 게임을 이어서 진행할 수 있습니다.
    - 게임종료 : 게임이 종료가 되고 홈화면으로 이동하게 됩니다.
- Thread
    
    <aside>
    📌 각 스레드들은 서로 비동기적으로 동작
    
    </aside>
    
    - **메인스레드**
        
        😶  시작 시점
        
        - 버튼을 누름과 동시에 메인 타이머 가동
        
        😶  종료 시점
        
        - 점수가 0점 미만이 되면 모든 타이머 비활성화 후 게임 종료
        - 정해진 시간 ( 1분 )이 되면 모든 타이머 비활성화 후 게임 종료
    - **독립 텃밭 스레드 ( 1 ~ 9 )**
        
        😶 시작 시점 
        
        - 올바른 아이템을 이용해 텃밭을 가꾸게 될 때마다 10초간의 타이머가 동작
        
        😶 종료 시점 
        
        - 정해진 시간 내에 올바른 아이템을 이용해 텃밭을 가꾸면 스레드 종료
            - 수확 전 : 스레드 종료와 함께 시작
            - 수확 후 : 스레드 아예 종료
        - 정해진 시간 10초가 지나면 두더지가 출몰하고 스레드 종료
        

# 📱  화면
이미지 클릭하면 시연영상으로 넘어감 <br>
<a href="https://www.youtube.com/watch?v=1ahJNL-G4_0"> <img width="363" alt="스크린샷 2021-12-17 오후 12 38 00" src="https://user-images.githubusercontent.com/55241258/146484981-1415d35e-c3b9-45b3-abbb-1ee4c7bc443d.png">
</a> <br>
<img width="728" alt="스크린샷 2021-12-17 오후 12 34 55" src="https://user-images.githubusercontent.com/55241258/146484732-5a9124bb-7282-4e48-9453-0244275a97ee.png">
<img width="728" alt="스크린샷 2021-12-17 오후 12 35 10" src="https://user-images.githubusercontent.com/55241258/146484749-4bffdc0c-acb5-4f6e-a5f7-6a5c3d201af3.png">
<img width="723" alt="스크린샷 2021-12-17 오후 12 35 20" src="https://user-images.githubusercontent.com/55241258/146484765-c3b0bd72-8b77-4d29-acaf-8708f4b86154.png">
<img width="732" alt="스크린샷 2021-12-17 오후 12 35 27" src="https://user-images.githubusercontent.com/55241258/146484783-d015009d-729b-472f-86e0-a98f744a2e13.png">

# 📝  구현 내용

---

**요약**

- Multi-Thread를 이용하여 게임 만들기 ( 핵심 )
    - 게임주제 : `주어진 시간 내에 농작물을 재배하여 점수를 많이 얻는 게임`
    - Dispatch에서 global, main을 적절하게 사용하여 타이머 설정
- StoryBoard 를 사용하지 않고 SnapKit, Then 을 사용
    - SnapKit을 이용하여 Constraint 제약 조건을 설정
    - Then을 이용하여 `UI 생성부분`과 `그에 대한 속성을 정의하는 부분` 분리됨을 방지하여 가독성을 높임

**역할**

- 개인 실습
- 프로젝트 기획, UI설계, 개발 등 모든 부분

**Skills**

- 개발 환경 : Xcode
- Swift, SnapKit, Then , Github
- UserDefaults 활용

**성과**

- SnapKit, Then 으로 UI들의 레이아웃 설정 경험 익히기
- ScrollView - PageControl로 게임방법 이미지들을 Paging 기법 처리
- `ToastMessage` 를 이용하여 게임 중 알림창 대신 메시지를 전달해 줄 경우 사용
- random을 이용하여 수확 농작물과 갯수 무작위로 선정
- UserDefaults를 사용하여 유저 정보 저장
- DispatchQueue의 global, main, async 상황에 맞춰 알맞게 사용
- Timer를 이용하여 시간 부분 구현

**진행** **시기**

- 2021.11.26 ~ 2021.12.02

# 🔗  링크
<a href="https://github.com/LeeHa-Yeon/RisingCamp_re/tree/main/6%EC%A3%BC%EC%B0%A8/ThreadGame"> 코드보기 </a>
